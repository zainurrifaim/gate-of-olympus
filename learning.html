<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learning Center - Gate of Olympus</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/png" href="media/images/icon.png">
    <style>
        sup {
            font-size: 0.65em;
            vertical-align: super;
            margin-left: 2px;
            color: #fde047; /* yellow-300 */
        }
    </style>
</head>
<body class="min-h-screen w-full flex flex-col items-center justify-center p-4">

    <div id="navbar-placeholder"></div>

    <main class="game-container w-full max-w-4xl mx-auto rounded-2xl p-4 md:p-8 text-white">
        <h2 class="font-cinzel text-3xl md:text-4xl font-bold text-yellow-300 tracking-wider text-center mb-8" data-i18n-key="learning_center_title"></h2>

        <div class="space-y-4" id="learning-accordion">
            <div class="accordion-item">
                <button class="accordion-header">
                    <span data-i18n-key="lc_part1_title"></span>
                    <span class="accordion-icon">+</span>
                </button>
                <div class="accordion-content">
                    <div class="p-4 space-y-4 text-justify">
                        <h3 class="font-bold text-xl text-yellow-200 text-left" data-i18n-key="lc_part1_subtitle1"></h3>
                        <p data-i18n-key="lc_part1_p1"></p>
                        <p data-i18n-key="lc_part1_p2"></p>

                        <h3 class="font-bold text-xl text-yellow-200 text-left" data-i18n-key="lc_part1_subtitle2"></h3>
                        <p data-i18n-key="lc_part1_p3"></p>
                        <ul class="list-disc pl-5 space-y-2">
                            <li><strong data-i18n-key="lc_part1_li1_title"></strong> <span data-i18n-key="lc_part1_li1_text"></span></li>
                            <li><strong data-i18n-key="lc_part1_li2_title"></strong> <span data-i18n-key="lc_part1_li2_text"></span></li>
                            <li><strong data-i18n-key="lc_part1_li3_title"></strong> <span data-i18n-key="lc_part1_li3_text"></span></li>
                            <li><strong data-i18n-key="lc_part1_li4_title"></strong> <span data-i18n-key="lc_part1_li4_text"></span></li>
                            <li><strong data-i18n-key="lc_part1_li5_title"></strong> <span data-i18n-key="lc_part1_li5_text"></span></li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="accordion-item">
                <button class="accordion-header">
                    <span data-i18n-key="lc_part2_title"></span>
                    <span class="accordion-icon">+</span>
                </button>
                <div class="accordion-content">
                     <div class="p-4 space-y-4 text-justify">
                        <h3 class="font-bold text-xl text-yellow-200 text-left" data-i18n-key="lc_part2_subtitle1"></h3>
                        <p data-i18n-key="lc_part2_p1"></p>
                        <h3 class="font-bold text-xl text-yellow-200 text-left" data-i18n-key="lc_part2_subtitle2"></h3>
                        <p data-i18n-key="lc_part2_p2"></p>
                        <h3 class="font-bold text-xl text-yellow-200 text-left" data-i18n-key="lc_part2_subtitle3"></h3>
                        <p data-i18n-key="lc_part2_p3"></p>
                    </div>
                </div>
            </div>

            <div class="accordion-item">
                <button class="accordion-header">
                    <span data-i18n-key="lc_part3_title"></span>
                    <span class="accordion-icon">+</span>
                </button>
                <div class="accordion-content">
                    <div class="p-4 space-y-4 text-justify">
                        <h3 class="font-bold text-xl text-yellow-200 text-left" data-i18n-key="lc_part3_subtitle1"></h3>
                        <p data-i18n-key="lc_part3_p1"></p>
                        <h3 class="font-bold text-xl text-yellow-200 text-left" data-i18n-key="lc_part3_subtitle2"></h3>
                        <p data-i18n-key="lc_part3_p2"></p>
                        <h3 class="font-bold text-xl text-yellow-200 text-left" data-i18n-key="lc_part3_subtitle3"></h3>
                        <p data-i18n-key="lc_part3_p3"></p>
                         <div class="overflow-x-auto">
                            <table class="min-w-full bg-gray-800 border border-yellow-500 text-left">
                                <thead>
                                    <tr>
                                        <th class="p-2 border-b border-yellow-500" data-i18n-key="lc_table_header_org"></th>
                                        <th class="p-2 border-b border-yellow-500" data-i18n-key="lc_table_header_support"></th>
                                        <th class="p-2 border-b border-yellow-500" data-i18n-key="lc_table_header_access"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="p-2 border-b border-gray-600" data-i18n-key="lc_table_row1_org"></td>
                                        <td class="p-2 border-b border-gray-600" data-i18n-key="lc_table_row1_support"></td>
                                        <td class="p-2 border-b border-gray-600" data-i18n-key="lc_table_row1_access"></td>
                                    </tr>
                                    <tr>
                                        <td class="p-2 border-b border-gray-600" data-i18n-key="lc_table_row2_org"></td>
                                        <td class="p-2 border-b border-gray-600" data-i18n-key="lc_table_row2_support"></td>
                                        <td class="p-2 border-b border-gray-600" data-i18n-key="lc_table_row2_access"></td>
                                    </tr>
                                    <tr>
                                        <td class="p-2 border-b border-gray-600" data-i18n-key="lc_table_row3_org"></td>
                                        <td class="p-2 border-b border-gray-600" data-i18n-key="lc_table_row3_support"></td>
                                        <td class="p-2 border-b border-gray-600" data-i18n-key="lc_table_row3_access"></td>
                                    </tr>
                                     <tr>
                                        <td class="p-2 border-b border-gray-600" data-i18n-key="lc_table_row4_org"></td>
                                        <td class="p-2 border-b border-gray-600" data-i18n-key="lc_table_row4_support"></td>
                                        <td class="p-2 border-b border-gray-600" data-i18n-key="lc_table_row4_access"></td>
                                    </tr>
                                    <tr>
                                        <td class="p-2" data-i18n-key="lc_table_row5_org"></td>
                                        <td class="p-2" data-i18n-key="lc_table_row5_support"></td>
                                        <td class="p-2" data-i18n-key="lc_table_row5_access"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <div class="accordion-item">
                <button class="accordion-header">
                    <span data-i18n-key="lc_references_title"></span>
                    <span class="accordion-icon">+</span>
                </button>
                <div class="accordion-content">
                    <div id="references-list" class="p-4 space-y-2 text-sm">
                        </div>
                </div>
            </div>
        </div>

        <div class="text-center mt-8">
            <a href="index.html" class="spin-button inline-block px-8 py-3 text-xl font-bold rounded-lg" data-i18n-key="back_to_game_button"></a>
        </div>
    </main>

    <div id="footer-placeholder"></div>

    <script type="module">
        import { loadComponent, initializeNavbar } from './js/utility.js';
        import { initI18n, translatePage } from './js/i18n.js';

        // Function to load and display references
        async function loadReferences() {
            try {
                const response = await fetch('locales/references.json');
                if (!response.ok) {
                    throw new Error('Could not load references.json');
                }
                const data = await response.json();
                const referencesList = document.getElementById('references-list');
                if (referencesList && data.references) {
                    const listHtml = data.references.map(ref => 
                        `<div class="reference-item"><strong>[${ref.id}]</strong> ${ref.source}</div>`
                    ).join('');
                    referencesList.innerHTML = listHtml;
                }
            } catch (error) {
                console.error('Error loading references:', error);
                const referencesList = document.getElementById('references-list');
                if(referencesList) {
                    referencesList.innerHTML = '<p>Could not load references at this time.</p>';
                }
            }
        }

        document.addEventListener('DOMContentLoaded', async () => {
            await initI18n();
            await loadComponent('components/navbar.html', 'navbar-placeholder');
            initializeNavbar();
            await loadComponent('components/footer.html', 'footer-placeholder');
            translatePage();
            
            // Load the references into the new section
            await loadReferences();

            const accordion = document.getElementById('learning-accordion');
            if (accordion) {
                const headers = accordion.querySelectorAll('.accordion-header');
                headers.forEach(header => {
                    header.addEventListener('click', () => {
                        const content = header.nextElementSibling;
                        const icon = header.querySelector('.accordion-icon');
                        header.classList.toggle('active');
                        if (content.style.maxHeight) {
                            content.style.maxHeight = null;
                            icon.textContent = '+';
                        } else {
                            // Use a small timeout to allow the DOM to update before getting scrollHeight
                            setTimeout(() => {
                                content.style.maxHeight = content.scrollHeight + "px";
                            }, 10);
                            icon.textContent = '−';
                        }
                    });
                });
            }
        });
    </script>

</body>
</html>