<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learning Center - Gate of Olympus</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/png" href="media/images/icon.png">
</head>
<body class="min-h-screen w-full flex flex-col items-center justify-center p-4">

    <div id="navbar-placeholder"></div>

    <main class="game-container w-full max-w-4xl mx-auto rounded-2xl p-4 md:p-8 text-white">
        <h2 class="font-cinzel text-3xl md:text-4xl font-bold text-yellow-300 tracking-wider text-center mb-8" data-i18n-key="learning_center_title"></h2>

        <div class="space-y-4" id="learning-accordion">
            <div class="accordion-item">
                <button class="accordion-header">
                    <span data-i18n-key="learning_rng_title"></span>
                    <span class="accordion-icon">+</span>
                </button>
                <div class="accordion-content">
                    <p data-i18n-key="learning_rng_text"></p>
                </div>
            </div>
            <div class="accordion-item">
                <button class="accordion-header">
                    <span data-i18n-key="learning_edge_title"></span>
                    <span class="accordion-icon">+</span>
                </button>
                <div class="accordion-content">
                    <p data-i18n-key="learning_edge_text"></p>
                </div>
            </div>
            <div class="accordion-item">
                <button class="accordion-header">
                    <span data-i18n-key="learning_psychology_title"></span>
                    <span class="accordion-icon">+</span>
                </button>
                <div class="accordion-content">
                    <p data-i18n-key="learning_psychology_text"></p>
                </div>
            </div>
        </div>

        <div class="text-center mt-8">
            <a href="index.html" class="spin-button inline-block px-8 py-3 text-xl font-bold rounded-lg" data-i18n-key="back_to_game_button"></a>
        </div>
    </main>

    <div id="footer-placeholder"></div>

    <script type="module">
        import { loadComponent, initializeNavbar } from './js/utility.js';
        import { initI18n, translatePage } from './js/i18n.js';

        document.addEventListener('DOMContentLoaded', async () => {
            await initI18n();
            await loadComponent('components/navbar.html', 'navbar-placeholder');
            initializeNavbar();
            // ADDED await here
            await loadComponent('components/footer.html', 'footer-placeholder');
            translatePage();

            const accordion = document.getElementById('learning-accordion');
            if (accordion) {
                const headers = accordion.querySelectorAll('.accordion-header');
                headers.forEach(header => {
                    header.addEventListener('click', () => {
                        const content = header.nextElementSibling;
                        const icon = header.querySelector('.accordion-icon');
                        header.classList.toggle('active');
                        if (content.style.maxHeight) {
                            content.style.maxHeight = null;
                            icon.textContent = '+';
                        } else {
                            content.style.maxHeight = content.scrollHeight + "px";
                            icon.textContent = 'âˆ’';
                        }
                    });
                });
            }
        });
    </script>

</body>
</html>